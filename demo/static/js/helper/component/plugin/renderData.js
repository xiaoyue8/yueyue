define(["jquery","request"],function(e,a){var t={createArrayToElement:function(a){var t=a.container||a.selector&&e(a.selector),i=a.array||[],n=a.stractItem,r=a.addType,l=i.reduce(function(e,a,t){return e+n(a,t,i.length)},"");if(!t)return l;"append"==r?t.append(l):t.html(l)},outputText:function(a){var t=a.keyValue,i=a.path?a.path+" ":"";for(var n in t)e(i+"."+n).html(t[n])},paginationLoadMore:function(t){let{container:i,api:n,param:r,callbackArray:l,other:o={}}=t,c={param:{keyValue:r},callee:arguments.callee};Object.assign(o,{formalParam:c}),l=l.concat(function(a){var n=a.page.totalPages,r=a.page.currentPage;1!=n&&0!=n&&(1==r&&i.after('<a class="paginationLoadMoreBtn">点击显示更多</a>'),n>r?i.next(".paginationLoadMoreBtn").on("click",function(){e(this).off("click"),t.param.page=r+1,c.callee(t)}):n==r&&i.next(".paginationLoadMoreBtn").off("click").text("没有更多数据啦"))}),a.ajax({api:n,param:{keyValue:r},callbackArray:l,other:o})},loadMore:function(i){let{container:n,api:r,param:l,callbackObject:o,other:c={}}=i,s={param:{keyValue:l},callee:arguments.callee},d=[function(a){var i=o.getArray(a);0==i.length?n.html(o.itemStrcatNull()):o.itemClick?i.forEach(function(t,i,r){let l=e(o.itemStrcat(t));o.itemClick(l,a,i,r),n.append(l)}):t.createArrayToElement({container:n,array:i,stractItem:o.itemStrcat,addType:"append"})}];Object.assign(c,{formalParam:s}),d=d.concat(function(a){var t=a.page.totalPages,r=a.page.currentPage;1!=t&&0!=t&&(1==r&&n.after('<a class="paginationLoadMoreBtn">点击显示更多</a>'),t>r?n.next(".paginationLoadMoreBtn").on("click",function(){e(this).off("click"),i.param.page=r+1,s.callee(i)}):t==r&&n.next(".paginationLoadMoreBtn").off("click").text("没有更多数据啦"))}),o.callbackArray&&(d=d.concat(o.callbackArray)),a.ajax({api:r,param:{keyValue:l},callbackArray:d,other:c})},spreadShrink:function(a){let{container:t,number:i=3}=a,n=`.hide-third-more>*${"+*".repeat(i)}`;t.children().length>i&&(document.styleSheets[0].addRule(n,"display:none;"),t.addClass("hide-third-more").after('<p class="showMoreParagraph active"><i></i>查看更多</p>').next().on("click",function(){var a=e(this);a.hasClass("active")?a.removeClass("active").html("<i></i>收起").prev().removeClass("hide-third-more"):a.addClass("active").html("<i></i>查看更多").prev().addClass("hide-third-more")}))},spreadShrinkTable:function(a){let{selector:t,number:i=10}=a,n=e(`${t}>tbody`),r=`hide-${i}-more`,l=`${t}.${r}>tbody>*${"+*".repeat(i)}`;n.children().length>i&&(document.styleSheets[0].addRule(l,"display:none;"),n.parent().addClass(r).after('<p class="showMoreTableTr active"><i></i>查看更多</p>').next().on("click",function(){var a=e(this);a.hasClass("active")?a.removeClass("active").html("<i></i>收起").prev().removeClass(r):a.addClass("active").html("<i></i>查看更多").prev().addClass(r)}))},spreadLine:function(a){let{container:t,number:i=4}=a,n=`.hide-${i}-line-more`,r="normal"==t.css("line-height")?1.4*t.css("font-size"):parseFloat(t.css("line-height"));Math.ceil(t.height()/r)>i&&(document.styleSheets[0].addRule(n,`-webkit-line-clamp:${i};display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;`),t.addClass(n.slice(1)).after('<p class="showMoreParagraph active"><i></i>查看更多</p>').next().on("click",function(){var a=e(this);a.hasClass("active")?a.html("<i></i>收起"):a.html("<i></i>查看更多"),a.toggleClass("active").prev().toggleClass(n.slice(1))}))},setDocumentTitle:function(e){setTimeout(function(){document.title=e;var a=document.createElement("iframe");a.style.visibility="hidden",a.style.width="1px",a.style.height="1px",a.onload=function(){setTimeout(function(){document.body.removeChild(a)},0)},document.body.appendChild(a)},0)}};return t});